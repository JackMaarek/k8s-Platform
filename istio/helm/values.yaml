# Istio mesh configuration — VirtualService + DestinationRule + AuthorizationPolicy
# are generated for each entry in the apps list below.
#
# ── What belongs here ────────────────────────────────────────────────────────
# Platform services that are always present after bootstrap:
#   argocd-server, prometheus-grafana
# These are declared statically because they exist in every cluster instance.
#
# ── What does NOT belong here ────────────────────────────────────────────────
# Application entries (lpcdm, quantum-cnn, etc.) are generated by platform-bot
# and committed directly to the target repo's istio/helm/values.yaml.
# They never appear in this template.
#
# ── Bot contract ─────────────────────────────────────────────────────────────
# platform-bot appends entries with this exact shape when running `app add`:
#
#   - name: <app-name>
#     namespace: <target-namespace>
#     port: 80
#     timeout: 30s
#     retries: 3
#
# The bot reads the existing values.yaml, appends under apps:, and commits.
# ─────────────────────────────────────────────────────────────────────────────

apps:
  - name: argocd-server
    namespace: argocd
    port: 443
    timeout: 60s
    retries: 3

  - name: prometheus-grafana
    namespace: monitoring
    port: 80
    timeout: 30s
    retries: 3

  # ── local-test fixtures ────────────────────────────────────────────────────
  # lpcdm — static nginx app for infra validation
  # Removed from this file when promoting to a real cluster.
  - name: lpcdm
    namespace: development
    port: 80
    timeout: 30s
    retries: 3
